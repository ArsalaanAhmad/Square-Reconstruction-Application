<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Magic Square Result</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/magic-square.js" defer></script>
</head>
<body>

<h1 class="result-header">Magic Square Result for <span th:text="${name}">Name</span></h1>
<div class="move-counter">Moves: <span id="moveCount">0</span></div>
<div class="outer-container">
    <div class="inner-container">
        <table id="magicSquareTable">
            <tr th:each="row, rowStat : ${magicSquare}">
                <td th:each="cell, cellStat : ${row}"
                    th:id="'cell-' + ${rowStat.index} + '-' + ${cellStat.index}"
                    th:text="${cell}"
                    onclick="selectCell(this)">0</td>
            </tr>
        </table>
    </div>
</div>
<a href="/" class="play-button" onclick="playClickingSound()"><span>Start Over</span></a>
<div id="validationResult" class="validation-message"></div>

<audio id="backgroundMusic" loop autoplay>
    <source src="/audio/StartingMusic.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>
<audio id="clickingSound" src="/audio/clicksound.mp3" preload="auto"></audio>

<script>
    // Set the volume for background music
    document.addEventListener('DOMContentLoaded', (event) => {
        const backgroundMusic = document.getElementById('backgroundMusic');
        backgroundMusic.volume = 0.3; // Set volume to 30%

        const clickingSound = document.getElementById('clickingSound');
        const buttons = document.querySelectorAll('button, a, td');
        buttons.forEach(button => {
            button.addEventListener('click', () => {
                clickingSound.play();
            });
        });

        // Add the 3-second delay and zoom-in effect
        const table = document.querySelector('#magicSquareTable');
        const delayCells = document.querySelectorAll('td');

        setTimeout(() => {
            table.classList.add('zoom-in');

            // Add a delay for each number to appear one by one
            delayCells.forEach((cell, index) => {
                setTimeout(() => {
                    cell.style.opacity = 1;
                }, index * 100); // Adjust the delay time as needed (e.g., 100ms per cell)
            });
        }, 3000); // 3-second delay before showing the table
    });
</script>
</body>
</html>